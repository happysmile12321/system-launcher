# Repository Guidelines

## Project Structure & Module Organization
Runtime code lives in `src/`. The CLI entry point (`src/cli/index.js`) coordinates orchestration flows by delegating to service layers in `src/services/` and shared logic in `src/core/` (Git-backed config, scripted deployments, schedulers). Web assets are served from `src/web/server.js`, with static UI files under `src/web/public/`. Utility helpers such as the colorized logger reside in `src/utils/`.

## Build, Test, and Development Commands
Use `npm start` to launch the Express dashboard on http://localhost:3000 once configuration is hydrated. `npm run cli` starts the interactive CLI. The current `npm test` target intentionally fails as a reminder to wire up automated testsâ€”replace it with a real runner before merging test-dependent changes.

## Coding Style & Naming Conventions
This project targets modern Node.js with native ES modules (`type: "module"`). Follow the existing two-space indentation, include semicolons, and prefer descriptive camelCase for functions/variables and PascalCase for classes. Route user-facing messaging through `src/utils/logger.js` to keep consistent coloring and severity tags. Keep comments concise; if bilingual notes are required, include an English summary for shared context.

## Testing Guidelines
Introduce tests alongside features under a top-level `tests/` directory that mirrors the `src/` structure (for example, `tests/core/scriptRunner.test.js`). Adopt a single runner (Node's built-in `node --test` or Jest) and update `npm test` accordingly. Tests should stub GitHub access through the `GitFS` abstraction, validate scheduler behaviour, and cover both CLI flows and Express routes. Failing tests must block merges, with particular focus on orchestration persistence and deployment paths.

## Commit & Pull Request Guidelines
Recent history leans on lowercase prefixes such as `docs: ...`; continue using `<type>: <summary>` with an imperative, English first line (append a Chinese clause only when it clarifies context). Reference issue IDs where applicable and keep commits scoped to one logical change. Pull requests should explain the scenario, list manual verification steps (`npm run cli`, `npm start`), and attach UI captures for user-facing updates. Confirm sensitive files like `.orchestrator.config.json` remain untracked before requesting review.

## Security & Configuration Tips
Local credentials and API tokens belong in `.env` and the generated `.orchestrator.config.json`. Never hard-code tokens or repository secrets; load them via `dotenv` and ensure helpers read from environment-first settings. When pushing GitHub-backed configuration, confirm branch protections before triggering writes and review the commit messages generated by `GitFS`.
