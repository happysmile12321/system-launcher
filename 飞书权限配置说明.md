# 飞书开放平台权限配置说明

为了确保飞书长连接WebSocket服务能够正常接收回调事件，您需要在飞书开放平台的应用权限管理中配置以下权限：

## 必需权限列表

### 1. 用户身份权限
- **user:read** - 获取用户基本信息
  - 用于获取用户ID、姓名等基本信息
  - 在消息接收和文件操作事件中需要

### 2. 云盘文件权限
- **drive:read** - 读取云盘文件
  - 用于读取云盘中的文件列表和文件信息
  - 支持文件浏览和搜索功能

- **drive:file** - 上传、下载文件到云空间
  - 用于文件的上传和下载操作
  - 支持文件管理功能

- **drive:file:download** - 下载云空间下的文件
  - 专门用于文件下载操作
  - 支持备份和同步功能

### 3. 消息权限（可选）
- **im:message** - 发送和接收消息
  - 用于处理消息接收事件
  - 支持消息自动回复和转发

- **im:message:send** - 发送消息
  - 用于发送通知消息
  - 支持工作流执行结果通知

## 配置步骤

1. **登录飞书开放平台**
   - 访问 [飞书开放平台](https://open.feishu.cn/)
   - 使用您的飞书账号登录

2. **进入应用管理**
   - 在开发者后台找到您的应用
   - 点击进入应用详情页

3. **配置权限**
   - 在左侧菜单中找到"权限管理"
   - 点击"添加权限"
   - 搜索并添加上述权限

4. **申请权限**
   - 添加权限后，点击"申请权限"
   - 填写申请理由（例如：用于文件管理和自动化工作流）
   - 提交申请并等待审核

5. **启用长连接**
   - 在"事件订阅"中启用长连接模式
   - 确保应用已获得必要的权限

## 权限说明

### 权限类型
- **应用身份权限**：用于获取用户身份信息
- **云盘权限**：用于文件操作和管理
- **消息权限**：用于消息收发和处理

### 权限范围
- **读取权限**：只能读取数据，不能修改
- **写入权限**：可以创建和修改数据
- **管理权限**：可以删除和管理数据

## 注意事项

1. **权限申请**：某些权限可能需要审核，请耐心等待
2. **权限范围**：建议只申请必要的权限，避免过度授权
3. **测试环境**：在测试阶段，可以使用沙箱环境进行权限测试
4. **生产环境**：生产环境需要确保所有权限都已正确配置

## 故障排除

### 常见问题
1. **权限不足**：检查是否已申请并获得了所有必要权限
2. **连接失败**：确认App ID和App Secret配置正确
3. **事件接收失败**：检查长连接是否已正确启用

### 调试方法
1. 查看应用日志，确认权限状态
2. 使用飞书开放平台的调试工具
3. 检查网络连接和防火墙设置

完成权限配置后，您的飞书长连接WebSocket服务将能够正常接收和处理各种回调事件。
